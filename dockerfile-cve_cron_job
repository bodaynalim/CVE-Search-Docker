# Use specific Python image that does not change over time
FROM python:3.10.9-slim-bullseye

RUN apt-get update && apt-get -y install cron

COPY crontab /etc/cron.d/cjob
RUN chmod 0744 /etc/cron.d/cjob

#COPY crontabtest /etc/cron.d/cjobtest
#RUN chmod 0744 /etc/cron.d/cjobtest

# Apply cron job
RUN crontab /etc/cron.d/cjob
#RUN crontab /etc/cron.d/cjobtest

WORKDIR /usr/src/app

COPY cve-search/. .

# Install the dependencies
RUN pip install -r requirements.txt

COPY docker/files/cve_search/configuration.ini ./etc/configuration.ini

WORKDIR /

CMD ["cron", "-f"]